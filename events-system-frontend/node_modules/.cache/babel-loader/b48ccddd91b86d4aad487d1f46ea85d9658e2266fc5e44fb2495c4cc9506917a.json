{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./AdminLogs.css';import AdminHeader from'./AdminHeader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminLogs=()=>{const[logs,setLogs]=useState([]);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[actionFilter,setActionFilter]=useState('');const[usernameSearch,setUsernameSearch]=useState('');const fetchLogs=async()=>{try{const token=localStorage.getItem('jwt_token');const response=await fetch(`/admin/view-logs?page=${page}&action=${actionFilter}&username=${usernameSearch}`,{method:'GET',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setLogs(data.interactions);setTotalPages(data.total_pages);}else{console.error('Failed to fetch logs');}}catch(error){console.error('Error fetching logs:',error);}};useEffect(()=>{fetchLogs();},[page,actionFilter,usernameSearch]);const handlePageChange=newPage=>{if(newPage>0&&newPage<=totalPages){setPage(newPage);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-logs-container\",children:[/*#__PURE__*/_jsx(AdminHeader,{}),/*#__PURE__*/_jsx(\"h2\",{children:\"User Interactions Logs\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setActionFilter(e.target.value),value:actionFilter,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Actions\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Login\",children:\"Login\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Event_created\",children:\"Event Created\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Paid\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Liked\",children:\"Liked\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Vetting_form\",children:\"Vetting Form Submitted\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by Username\",value:usernameSearch,onChange:e=>setUsernameSearch(e.target.value)})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"logs-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Creation Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Event ID\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:logs.map(log=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:log.username}),/*#__PURE__*/_jsx(\"td\",{children:log.action}),/*#__PURE__*/_jsx(\"td\",{children:log.timestamp}),/*#__PURE__*/_jsx(\"td\",{children:log.event_id?log.event_id:'N/A'})]},log.interaction_id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page-1),disabled:page===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",page,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page+1),disabled:page===totalPages,children:\"Next\"})]})]});};export default AdminLogs;","map":{"version":3,"names":["React","useState","useEffect","AdminHeader","jsx","_jsx","jsxs","_jsxs","AdminLogs","logs","setLogs","page","setPage","totalPages","setTotalPages","actionFilter","setActionFilter","usernameSearch","setUsernameSearch","fetchLogs","token","localStorage","getItem","response","fetch","method","headers","ok","data","json","interactions","total_pages","console","error","handlePageChange","newPage","className","children","onChange","e","target","value","type","placeholder","map","log","username","action","timestamp","event_id","interaction_id","onClick","disabled"],"sources":["C:/Users/Rindella Nhavoto/Desktop/ProjectsVSC/SWEproject/EventsGit/DLMCSPSE01_Rindella_Nhavoto_9222794/events-system-frontend/src/components/AdminLogs.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './AdminLogs.css';\nimport AdminHeader from './AdminHeader';\n\nconst AdminLogs = () => {\n  const [logs, setLogs] = useState([]);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [actionFilter, setActionFilter] = useState('');\n  const [usernameSearch, setUsernameSearch] = useState('');\n\n  const fetchLogs = async () => {\n    try {\n      const token = localStorage.getItem('jwt_token');\n      const response = await fetch(\n        `/admin/view-logs?page=${page}&action=${actionFilter}&username=${usernameSearch}`,\n        {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`,\n          },\n        }\n      );\n      if (response.ok) {\n        const data = await response.json();\n        setLogs(data.interactions);\n        setTotalPages(data.total_pages);\n      } else {\n        console.error('Failed to fetch logs');\n      }\n    } catch (error) {\n      console.error('Error fetching logs:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchLogs();\n  }, [page, actionFilter, usernameSearch]);\n\n  const handlePageChange = (newPage) => {\n    if (newPage > 0 && newPage <= totalPages) {\n      setPage(newPage);\n    }\n  };\n\n  return (\n    <div className=\"admin-logs-container\">\n      <AdminHeader />\n      <h2>User Interactions Logs</h2>\n      <div className=\"filters\">\n        <select onChange={(e) => setActionFilter(e.target.value)} value={actionFilter}>\n          <option value=\"\">All Actions</option>\n          <option value=\"Login\">Login</option>\n          <option value=\"Event_created\">Event Created</option>\n          <option value=\"Paid\">Paid</option>\n          <option value=\"Liked\">Liked</option>\n          <option value=\"Vetting_form\">Vetting Form Submitted</option>\n        </select>\n        <input\n          type=\"text\"\n          placeholder=\"Search by Username\"\n          value={usernameSearch}\n          onChange={(e) => setUsernameSearch(e.target.value)}\n        />\n      </div>\n\n      <table className=\"logs-table\">\n        <thead>\n          <tr>\n            <th>Username</th>\n            <th>Action</th>\n            <th>Creation Date</th>\n            <th>Event ID</th>\n          </tr>\n        </thead>\n        <tbody>\n          {logs.map((log) => (\n            <tr key={log.interaction_id}>\n              <td>{log.username}</td>\n              <td>{log.action}</td>\n              <td>{log.timestamp}</td>\n              <td>{log.event_id ? log.event_id : 'N/A'}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <div className=\"pagination\">\n        <button onClick={() => handlePageChange(page - 1)} disabled={page === 1}>\n          Previous\n        </button>\n        <span>\n          Page {page} of {totalPages}\n        </span>\n        <button onClick={() => handlePageChange(page + 1)} disabled={page === totalPages}>\n          Next\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminLogs;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}