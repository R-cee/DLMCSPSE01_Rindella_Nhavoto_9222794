{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./AdminIntegrations.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminIntegrations=()=>{const[integrations,setIntegrations]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[editIntegration,setEditIntegration]=useState(null);// Fetch integration settings\nuseEffect(()=>{const fetchIntegrations=async()=>{try{const response=await fetch('/admin/integrations',{method:'GET',headers:{'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setIntegrations(data);}else{const errorData=await response.json();setError(errorData.error);}}catch(error){setError('Failed to fetch integrations. Please try again later.');}finally{setIsLoading(false);}};fetchIntegrations();},[]);const handleEditClick=integration=>{setEditIntegration(integration);};const handleInputChange=e=>{const{name,value}=e.target;setEditIntegration({...editIntegration,[name]:value});};const handleSaveClick=async()=>{try{const response=await fetch(`/admin/integrations/${editIntegration.integration_id}`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({api_key:editIntegration.api_key,status:editIntegration.status})});if(response.ok){// Update the list with the new changes\nsetIntegrations(prevIntegrations=>prevIntegrations.map(integration=>integration.integration_id===editIntegration.integration_id?editIntegration:integration));setEditIntegration(null);// Exit edit mode\n}else{const errorData=await response.json();setError(errorData.error);}}catch(error){setError('Failed to update integration. Please try again later.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-integrations-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Manage Integrations\"}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading integrations...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}):/*#__PURE__*/_jsx(\"div\",{className:\"integration-cards\",children:integrations.map(integration=>/*#__PURE__*/_jsx(\"div\",{className:\"integration-card\",children:editIntegration&&editIntegration.integration_id===integration.integration_id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Provider:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:integration.provider,disabled:true}),/*#__PURE__*/_jsx(\"label\",{children:\"API Key:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"api_key\",value:editIntegration.api_key,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Status:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:editIntegration.status,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Inactive\",children:\"Inactive\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveClick,children:\"Save\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Provider:\"}),\" \",integration.provider]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"API Key:\"}),\" \",integration.api_key]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",integration.status]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditClick(integration),children:\"Edit\"})]})},integration.integration_id))})]});};export default AdminIntegrations;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminIntegrations","integrations","setIntegrations","isLoading","setIsLoading","error","setError","editIntegration","setEditIntegration","fetchIntegrations","response","fetch","method","headers","ok","data","json","errorData","handleEditClick","integration","handleInputChange","e","name","value","target","handleSaveClick","integration_id","body","JSON","stringify","api_key","status","prevIntegrations","map","className","children","type","provider","disabled","onChange","onClick"],"sources":["C:/Users/Rindella Nhavoto/Desktop/ProjectsVSC/SWEproject/events-system-frontend/src/components/AdminIntegrations.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './AdminIntegrations.css';\r\n\r\nconst AdminIntegrations = () => {\r\n  const [integrations, setIntegrations] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [editIntegration, setEditIntegration] = useState(null);\r\n\r\n  // Fetch integration settings\r\n  useEffect(() => {\r\n    const fetchIntegrations = async () => {\r\n      try {\r\n        const response = await fetch('/admin/integrations', {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setIntegrations(data);\r\n        } else {\r\n          const errorData = await response.json();\r\n          setError(errorData.error);\r\n        }\r\n      } catch (error) {\r\n        setError('Failed to fetch integrations. Please try again later.');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchIntegrations();\r\n  }, []);\r\n\r\n  const handleEditClick = (integration) => {\r\n    setEditIntegration(integration);\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setEditIntegration({\r\n      ...editIntegration,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSaveClick = async () => {\r\n    try {\r\n      const response = await fetch(`/admin/integrations/${editIntegration.integration_id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          api_key: editIntegration.api_key,\r\n          status: editIntegration.status,\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        // Update the list with the new changes\r\n        setIntegrations((prevIntegrations) =>\r\n          prevIntegrations.map((integration) =>\r\n            integration.integration_id === editIntegration.integration_id\r\n              ? editIntegration\r\n              : integration\r\n          )\r\n        );\r\n        setEditIntegration(null); // Exit edit mode\r\n      } else {\r\n        const errorData = await response.json();\r\n        setError(errorData.error);\r\n      }\r\n    } catch (error) {\r\n      setError('Failed to update integration. Please try again later.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-integrations-page\">\r\n      <h1>Manage Integrations</h1>\r\n      {isLoading ? (\r\n        <p>Loading integrations...</p>\r\n      ) : error ? (\r\n        <p className=\"error-message\">{error}</p>\r\n      ) : (\r\n        <div className=\"integration-cards\">\r\n          {integrations.map((integration) => (\r\n            <div key={integration.integration_id} className=\"integration-card\">\r\n              {editIntegration && editIntegration.integration_id === integration.integration_id ? (\r\n                <>\r\n                  <label>Provider:</label>\r\n                  <input type=\"text\" value={integration.provider} disabled />\r\n\r\n                  <label>API Key:</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"api_key\"\r\n                    value={editIntegration.api_key}\r\n                    onChange={handleInputChange}\r\n                  />\r\n\r\n                  <label>Status:</label>\r\n                  <select\r\n                    name=\"status\"\r\n                    value={editIntegration.status}\r\n                    onChange={handleInputChange}\r\n                  >\r\n                    <option value=\"Active\">Active</option>\r\n                    <option value=\"Inactive\">Inactive</option>\r\n                  </select>\r\n\r\n                  <button onClick={handleSaveClick}>Save</button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <p>\r\n                    <strong>Provider:</strong> {integration.provider}\r\n                  </p>\r\n                  <p>\r\n                    <strong>API Key:</strong> {integration.api_key}\r\n                  </p>\r\n                  <p>\r\n                    <strong>Status:</strong> {integration.status}\r\n                  </p>\r\n                  <button onClick={() => handleEditClick(integration)}>Edit</button>\r\n                </>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminIntegrations;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}