{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./ManageUserPage.css';import AdminHeader from'./AdminHeader';import{useNavigate}from'react-router-dom';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageUserPage=()=>{const[users,setUsers]=useState([]);const navigate=useNavigate();useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const token=localStorage.getItem('jwt_token');const response=await fetch('/api/admin/users',{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setUsers(data);}else{toast.error('Failed to fetch users',{position:toast.POSITION.TOP_RIGHT});}}catch(error){toast.error('Error fetching users',{position:toast.POSITION.TOP_RIGHT});}};const toggleUserStatus=async user_id=>{try{const token=localStorage.getItem('jwt_token');const response=await fetch(`/api/admin/user-status/${user_id}`,{method:'POST',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(data.success){fetchUsers();toast.success('User status updated successfully',{position:toast.POSITION.TOP_RIGHT,onClose:()=>navigate('/admin-dashboard')// Redirect after success\n});}else{toast.error('Error updating user status',{position:toast.POSITION.TOP_RIGHT});}}catch(error){toast.error('Error updating user status',{position:toast.POSITION.TOP_RIGHT});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"manage-user-page\",children:[/*#__PURE__*/_jsx(AdminHeader,{}),/*#__PURE__*/_jsx(ToastContainer,{}),\" \",/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Users\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{children:user.status}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:`status-button ${user.status==='active'?'active':'blocked'}`,onClick:()=>toggleUserStatus(user.user_id),children:user.status==='active'?'Block':'Unblock'})})]},user.user_id))})]})]});};export default ManageUserPage;","map":{"version":3,"names":["React","useState","useEffect","AdminHeader","useNavigate","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","ManageUserPage","users","setUsers","navigate","fetchUsers","token","localStorage","getItem","response","fetch","headers","ok","data","json","error","position","POSITION","TOP_RIGHT","toggleUserStatus","user_id","method","success","onClose","className","children","map","user","username","email","role","status","onClick"],"sources":["C:/Users/Rindella Nhavoto/Desktop/ProjectsVSC/SWEproject/EventsGit/DLMCSPSE01_Rindella_Nhavoto_9222794/events-system-frontend/src/components/ManageUserPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './ManageUserPage.css';\r\nimport AdminHeader from './AdminHeader';    \r\nimport { useNavigate } from 'react-router-dom';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst ManageUserPage = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            const token = localStorage.getItem('jwt_token'); \r\n            const response = await fetch('/api/admin/users', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n            });\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setUsers(data);\r\n            } else {\r\n                toast.error('Failed to fetch users', { position: toast.POSITION.TOP_RIGHT });\r\n            }\r\n        } catch (error) {\r\n            toast.error('Error fetching users', { position: toast.POSITION.TOP_RIGHT });\r\n        }\r\n    };\r\n\r\n    const toggleUserStatus = async (user_id) => {\r\n        try {\r\n            const token = localStorage.getItem('jwt_token');\r\n            const response = await fetch(`/api/admin/user-status/${user_id}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n            });\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                fetchUsers(); \r\n                toast.success('User status updated successfully', {\r\n                    position: toast.POSITION.TOP_RIGHT,\r\n                    onClose: () => navigate('/admin-dashboard')  // Redirect after success\r\n                });\r\n            } else {\r\n                toast.error('Error updating user status', { position: toast.POSITION.TOP_RIGHT });\r\n            }\r\n        } catch (error) {\r\n            toast.error('Error updating user status', { position: toast.POSITION.TOP_RIGHT });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"manage-user-page\">\r\n            <AdminHeader />\r\n            <ToastContainer /> {/* Add ToastContainer to display toast messages */}\r\n            <h2>Manage Users</h2>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Username</th>\r\n                        <th>Email</th>\r\n                        <th>Role</th>\r\n                        <th>Status</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {users.map((user) => (\r\n                        <tr key={user.user_id}>\r\n                            <td>{user.username}</td>\r\n                            <td>{user.email}</td>\r\n                            <td>{user.role}</td>\r\n                            <td>{user.status}</td>\r\n                            <td>\r\n                                <button\r\n                                    className={`status-button ${user.status === 'active' ? 'active' : 'blocked'}`}\r\n                                    onClick={() => toggleUserStatus(user.user_id)}\r\n                                >\r\n                                    {user.status === 'active' ? 'Block' : 'Unblock'}\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ManageUserPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}