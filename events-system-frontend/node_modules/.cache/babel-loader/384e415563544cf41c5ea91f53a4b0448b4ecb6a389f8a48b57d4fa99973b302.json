{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'./AdminDashboardPage.css';import AdminHeader from'./AdminHeader';import{ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboardPage=()=>{const[counters,setCounters]=useState({pending:0,approved:0,rejected:0});const[profiles,setProfiles]=useState([]);const[selectedStatus,setSelectedStatus]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchCounters=async()=>{try{const token=localStorage.getItem('jwt_token');const response=await fetch('/api/admin/profile-counters',{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setCounters(data);}else{console.error('Failed to fetch event counters');}}catch(error){console.error('Error fetching event counters:',error);}};fetchCounters();},[]);const handleStatusClick=async status=>{setSelectedStatus(status);try{const token=localStorage.getItem('jwt_token');const response=await fetch(`/api/admin/profiles?status=${status}`,{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setProfiles(data);}else{console.error(`Failed to fetch ${status} profiles`);}}catch(error){console.error(`Error fetching ${status} profiles:`,error);}};const handleProfileClick=profile=>{navigate(`/admin/vetting/${profile.user_id}`,{state:{profile,isAdmin:true}});};const handleManageUsers=()=>{navigate('/admin/manage-users');};const handleManageEvents=()=>{navigate('/admin/manage-events');};const handleCreateAdmin=()=>{navigate('/admin/create-admin');};const handleViewLogs=()=>{navigate('/admin/view-logs');};const handleLogout=()=>{navigate('/login');};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsx(AdminHeader,{}),/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Profile Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"counters\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"counter\",onClick:()=>handleStatusClick('Pending'),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Pending\"}),/*#__PURE__*/_jsx(\"p\",{children:counters.pending})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"counter\",onClick:()=>handleStatusClick('Approved'),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Approved\"}),/*#__PURE__*/_jsx(\"p\",{children:counters.approved})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"counter\",onClick:()=>handleStatusClick('Rejected'),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Rejected\"}),/*#__PURE__*/_jsx(\"p\",{children:counters.rejected})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:`manage-events-button ${counters.pending>0?'glow':''}`,onClick:handleManageEvents,children:\"Manage Events\"}),/*#__PURE__*/_jsx(\"button\",{className:\"manage-users-button\",onClick:handleManageUsers,children:\"Manage Users\"}),/*#__PURE__*/_jsx(\"button\",{className:\"create-admin-button\",onClick:handleCreateAdmin,children:\"Create Admin\"}),/*#__PURE__*/_jsx(\"button\",{className:\"view-logs-button\",onClick:handleViewLogs,children:\"View Logs\"})]}),selectedStatus&&/*#__PURE__*/_jsxs(\"div\",{className:\"profiles-list\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[selectedStatus,\" Profiles\"]}),profiles.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No profiles to display.\"}):/*#__PURE__*/_jsx(\"ul\",{children:profiles.map(profile=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleProfileClick(profile),children:[/*#__PURE__*/_jsx(\"span\",{children:profile.username}),\" - \",/*#__PURE__*/_jsxs(\"span\",{children:[profile.first_name,\" \",profile.last_name]}),\" - \",/*#__PURE__*/_jsx(\"span\",{children:profile.host_type})]},profile.user_id))})]})]})]});};export default AdminDashboardPage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","AdminHeader","ToastContainer","jsx","_jsx","jsxs","_jsxs","AdminDashboardPage","counters","setCounters","pending","approved","rejected","profiles","setProfiles","selectedStatus","setSelectedStatus","navigate","fetchCounters","token","localStorage","getItem","response","fetch","headers","ok","data","json","console","error","handleStatusClick","status","handleProfileClick","profile","user_id","state","isAdmin","handleManageUsers","handleManageEvents","handleCreateAdmin","handleViewLogs","handleLogout","className","children","onClick","length","map","username","first_name","last_name","host_type"],"sources":["C:/Users/Rindella Nhavoto/Desktop/ProjectsVSC/SWEproject/EventsGit/DLMCSPSE01_Rindella_Nhavoto_9222794/events-system-frontend/src/components/AdminDashboardPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './AdminDashboardPage.css';\r\nimport AdminHeader from './AdminHeader';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst AdminDashboardPage = () => {\r\n  const [counters, setCounters] = useState({ pending: 0, approved: 0, rejected: 0 });\r\n  const [profiles, setProfiles] = useState([]);\r\n  const [selectedStatus, setSelectedStatus] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchCounters = async () => {\r\n      try {\r\n        const token = localStorage.getItem('jwt_token');\r\n        const response = await fetch('/api/admin/profile-counters', {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n          },\r\n        });\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setCounters(data);\r\n        } else {\r\n          console.error('Failed to fetch event counters');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching event counters:', error);\r\n      }\r\n    };\r\n\r\n    fetchCounters();\r\n  }, []);\r\n\r\n  const handleStatusClick = async (status) => {\r\n    setSelectedStatus(status);\r\n    try {\r\n      const token = localStorage.getItem('jwt_token');\r\n      const response = await fetch(`/api/admin/profiles?status=${status}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      });\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setProfiles(data);\r\n      } else {\r\n        console.error(`Failed to fetch ${status} profiles`);\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error fetching ${status} profiles:`, error);\r\n    }\r\n  };\r\n\r\n  const handleProfileClick = (profile) => {\r\n    navigate(`/admin/vetting/${profile.user_id}`, { state: { profile, isAdmin: true } });\r\n  };\r\n\r\n  const handleManageUsers = () => {\r\n    navigate('/admin/manage-users');\r\n  };\r\n\r\n  const handleManageEvents = () => {\r\n    navigate('/admin/manage-events');\r\n  };\r\n\r\n  const handleCreateAdmin = () => {\r\n    navigate('/admin/create-admin');\r\n  };\r\n\r\n  const handleViewLogs = () => {\r\n    navigate('/admin/view-logs');\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-dashboard\">\r\n      <AdminHeader />\r\n      <ToastContainer />\r\n      <div className=\"content\">\r\n        <h1>Admin Dashboard</h1>\r\n\r\n        <h2>Profile Status</h2>\r\n        <div className=\"counters\">\r\n          <div className=\"counter\" onClick={() => handleStatusClick('Pending')}>\r\n            <h3>Pending</h3>\r\n            <p>{counters.pending}</p>\r\n          </div>\r\n          <div className=\"counter\" onClick={() => handleStatusClick('Approved')}>\r\n            <h3>Approved</h3>\r\n            <p>{counters.approved}</p>\r\n          </div>\r\n          <div className=\"counter\" onClick={() => handleStatusClick('Rejected')}>\r\n            <h3>Rejected</h3>\r\n            <p>{counters.rejected}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"actions\">\r\n          <button\r\n            className={`manage-events-button ${counters.pending > 0 ? 'glow' : ''}`}\r\n            onClick={handleManageEvents}\r\n          >\r\n            Manage Events\r\n          </button>\r\n          <button className=\"manage-users-button\" onClick={handleManageUsers}>\r\n            Manage Users\r\n          </button>\r\n          <button className=\"create-admin-button\" onClick={handleCreateAdmin}>\r\n            Create Admin\r\n          </button>\r\n          <button className=\"view-logs-button\" onClick={handleViewLogs}>\r\n            View Logs\r\n          </button>\r\n        </div>\r\n\r\n        {selectedStatus && (\r\n          <div className=\"profiles-list\">\r\n            <h2>{selectedStatus} Profiles</h2>\r\n            {profiles.length === 0 ? (\r\n              <p>No profiles to display.</p>\r\n            ) : (\r\n              <ul>\r\n                {profiles.map((profile) => (\r\n                  <li key={profile.user_id} onClick={() => handleProfileClick(profile)}>\r\n                    <span>{profile.username}</span> - <span>{profile.first_name} {profile.last_name}</span> - <span>{profile.host_type}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboardPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}