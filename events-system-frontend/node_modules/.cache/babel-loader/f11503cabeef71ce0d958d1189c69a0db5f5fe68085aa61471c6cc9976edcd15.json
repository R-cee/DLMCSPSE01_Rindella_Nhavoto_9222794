{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import{loadStripe}from'@stripe/stripe-js';import{Elements}from'@stripe/react-stripe-js';import CheckoutForm from'./CheckoutForm';import'./LandingPage.css';// Initialize Stripe with your test public key\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const stripePromise=loadStripe('pk_test_123pol');const LandingPage=()=>{var _location$state;const navigate=useNavigate();const location=useLocation();const username=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.username)||'Guest';const[countries,setCountries]=useState([]);const[locations,setLocations]=useState([]);const[categories,setCategories]=useState([]);const[selectedCountry,setSelectedCountry]=useState('');const[selectedLocation,setSelectedLocation]=useState('');const[selectedCategory,setSelectedCategory]=useState('');const[events,setEvents]=useState([]);const[flippedEvents,setFlippedEvents]=useState({});const[selectedEvent,setSelectedEvent]=useState(null);const[likedEvents,setLikedEvents]=useState({});const token=localStorage.getItem('jwt_token');// Get the JWT token from local storage\n// Fetch the list of countries from the server\nuseEffect(()=>{const fetchCountries=async()=>{try{const response=await fetch('/events/countries');const data=await response.json();setCountries(data);}catch(error){console.error('Error fetching countries:',error);}};fetchCountries();},[]);useEffect(()=>{// Fetch the list of locations and categories based on selected country\nconst fetchFilters=async()=>{if(selectedCountry){try{const response=await fetch(`/events/filters?country=${selectedCountry}`);const data=await response.json();setLocations(data.locations);setCategories(data.categories);}catch(error){console.error('Error fetching filters:',error);}}};fetchFilters();},[selectedCountry]);useEffect(()=>{const fetchEvents=async()=>{if(selectedCountry){try{const url=`/events?country=${selectedCountry}&location=${selectedLocation}&category=${selectedCategory}&status=Approved`;const response=await fetch(url);const data=await response.json();// Get current date and filter events whose date is in the future\nconst currentDate=new Date();const upcomingEvents=data.filter(event=>new Date(event.event_date)>currentDate);setEvents(upcomingEvents);}catch(error){console.error('Error fetching events:',error);}}};fetchEvents();},[selectedCountry,selectedLocation,selectedCategory]);const handleCountryChange=e=>{setSelectedCountry(e.target.value);setSelectedLocation('');// Reset location when country changes\nsetSelectedCategory('');// Reset category when country changes\nsetEvents([]);// Reset events when country changes\n};const handleLocationChange=e=>{setSelectedLocation(e.target.value);};const handleCategoryChange=e=>{setSelectedCategory(e.target.value);};const handleEventClick=(e,event_id)=>{if(e.target.classList.contains('booking-dropdown')||e.target.classList.contains('proceed-button')||e.target.classList.contains('like-button')||e.target.classList.contains('settings-dropdown')){return;}setFlippedEvents(prev=>({...prev,[event_id]:!prev[event_id]}));};const handlePaymentMethodChange=async(event,paymentMethod)=>{setSelectedEvent(event);if(paymentMethod==='stripe'){navigate(`/checkout`,{state:{event,method:'stripe'},headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});}else if(paymentMethod==='mpesa'){// Make a request to simulate Mpesa payment with JWT token in the headers\ntry{const response=await fetch('/simulate-mpesa-payment',{method:'POST',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify({event_id:event.event_id,amount:event.event_price})});if(response.ok){alert('Payment successful!');}else{alert('Payment failed. Please try again.');}}catch(error){console.error('Error making M-Pesa payment:',error);alert('An error occurred. Please try again.');}}};const handleLikeClick=async event_id=>{const isLiked=likedEvents[event_id];try{const response=await fetch(`/events/${event_id}/like`,{method:isLiked?'DELETE':'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify({user_id:location.state.user_id})});if(response.ok){setLikedEvents(prev=>({...prev,[event_id]:!isLiked}));}else{console.error(isLiked?'Failed to unlike the event':'Failed to like the event');}}catch(error){console.error(isLiked?'Error unliking event:':'Error liking event:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"landing-page\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"nav-links\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/login'),children:\"Logout\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"settings-dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/change-password'),children:\"Change Password\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/view-proof-of-payment'),children:\"View Proof of Payment\"})]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/notifications'),children:\"Notifications\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/my-events'),children:\"My Events\"})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome, \",username,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Select a Country to View Events:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:handleCountryChange,value:selectedCountry,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Country\"}),countries.map((country,index)=>/*#__PURE__*/_jsx(\"option\",{value:country,children:country},index))]}),selectedCountry&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"select\",{onChange:handleLocationChange,value:selectedLocation,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Location\"}),locations.map((location,index)=>/*#__PURE__*/_jsx(\"option\",{value:location,children:location},index))]}),/*#__PURE__*/_jsxs(\"select\",{onChange:handleCategoryChange,value:selectedCategory,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),categories.map((category,index)=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},index))]})]})]}),events.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"events-container\",children:events.map(event=>/*#__PURE__*/_jsx(\"div\",{className:`event-card ${flippedEvents[event.event_id]?'flipped':''}`,onClick:e=>handleEventClick(e,event.event_id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"event-card-inner\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-card-front\",children:[/*#__PURE__*/_jsx(\"img\",{src:`/event_images/${event.event_poster}`,alt:event.event_name,className:\"event-poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:event.event_name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(event.event_date).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",event.event_location]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-card-back\",children:[/*#__PURE__*/_jsx(\"h3\",{children:event.event_name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",event.event_description]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" $\",event.event_price]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Capacity:\"}),\" \",event.event_capacity,\" people\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tickets Remaining:\"}),\" \",event.event_capacity,\" tickets\"]}),/*#__PURE__*/_jsxs(\"select\",{className:\"booking-dropdown\",onClick:e=>e.stopPropagation(),onChange:e=>handlePaymentMethodChange(event,e.target.value),defaultValue:\"\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Buy Tickets\"}),/*#__PURE__*/_jsx(\"option\",{value:\"stripe\",children:\"Card Payment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mpesa\",children:\"M-Pesa\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"like-button\",onClick:e=>{e.stopPropagation();handleLikeClick(event.event_id);},children:likedEvents[event.event_id]?'Unlike':'Like'})]})]})},event.event_id))}):selectedCountry&&/*#__PURE__*/_jsx(\"p\",{children:\"No approved events available for the selected filters.\"})]}),selectedEvent&&/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{event:selectedEvent})})]});};export default LandingPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","loadStripe","Elements","CheckoutForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","stripePromise","LandingPage","_location$state","navigate","location","username","state","countries","setCountries","locations","setLocations","categories","setCategories","selectedCountry","setSelectedCountry","selectedLocation","setSelectedLocation","selectedCategory","setSelectedCategory","events","setEvents","flippedEvents","setFlippedEvents","selectedEvent","setSelectedEvent","likedEvents","setLikedEvents","token","localStorage","getItem","fetchCountries","response","fetch","data","json","error","console","fetchFilters","fetchEvents","url","currentDate","Date","upcomingEvents","filter","event","event_date","handleCountryChange","e","target","value","handleLocationChange","handleCategoryChange","handleEventClick","event_id","classList","contains","prev","handlePaymentMethodChange","paymentMethod","method","headers","body","JSON","stringify","amount","event_price","ok","alert","handleLikeClick","isLiked","user_id","className","children","onClick","onChange","map","country","index","category","length","src","event_poster","alt","event_name","toLocaleString","event_location","event_description","event_capacity","stopPropagation","defaultValue","disabled","stripe"],"sources":["C:/Users/Rindella Nhavoto/Desktop/ProjectsVSC/SWEproject/events-system-frontend/src/components/LandingPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { Elements } from '@stripe/react-stripe-js';\r\nimport CheckoutForm from './CheckoutForm';\r\nimport './LandingPage.css';\r\n\r\n// Initialize Stripe with your test public key\r\nconst stripePromise = loadStripe('pk_test_123pol');\r\n\r\nconst LandingPage = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const username = location.state?.username || 'Guest';\r\n\r\n  const [countries, setCountries] = useState([]);\r\n  const [locations, setLocations] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [selectedCountry, setSelectedCountry] = useState('');\r\n  const [selectedLocation, setSelectedLocation] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState('');\r\n  const [events, setEvents] = useState([]);\r\n  const [flippedEvents, setFlippedEvents] = useState({});\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n  const [likedEvents, setLikedEvents] = useState({});\r\n\r\n  const token = localStorage.getItem('jwt_token'); // Get the JWT token from local storage\r\n\r\n  // Fetch the list of countries from the server\r\n  useEffect(() => {\r\n    const fetchCountries = async () => {\r\n      try {\r\n        const response = await fetch('/events/countries');\r\n        const data = await response.json();\r\n        setCountries(data);\r\n      } catch (error) {\r\n        console.error('Error fetching countries:', error);\r\n      }\r\n    };\r\n\r\n    fetchCountries();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Fetch the list of locations and categories based on selected country\r\n    const fetchFilters = async () => {\r\n      if (selectedCountry) {\r\n        try {\r\n          const response = await fetch(`/events/filters?country=${selectedCountry}`);\r\n          const data = await response.json();\r\n          setLocations(data.locations);\r\n          setCategories(data.categories);\r\n        } catch (error) {\r\n          console.error('Error fetching filters:', error);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchFilters();\r\n  }, [selectedCountry]);\r\n\r\n  useEffect(() => {\r\n    const fetchEvents = async () => {\r\n      if (selectedCountry) {\r\n        try {\r\n          const url = `/events?country=${selectedCountry}&location=${selectedLocation}&category=${selectedCategory}&status=Approved`;\r\n          const response = await fetch(url);\r\n          const data = await response.json();\r\n\r\n          // Get current date and filter events whose date is in the future\r\n          const currentDate = new Date();\r\n          const upcomingEvents = data.filter(event => new Date(event.event_date) > currentDate);\r\n\r\n          setEvents(upcomingEvents);\r\n        } catch (error) {\r\n          console.error('Error fetching events:', error);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchEvents();\r\n  }, [selectedCountry, selectedLocation, selectedCategory]);\r\n\r\n  const handleCountryChange = (e) => {\r\n    setSelectedCountry(e.target.value);\r\n    setSelectedLocation(''); // Reset location when country changes\r\n    setSelectedCategory(''); // Reset category when country changes\r\n    setEvents([]); // Reset events when country changes\r\n  };\r\n\r\n  const handleLocationChange = (e) => {\r\n    setSelectedLocation(e.target.value);\r\n  };\r\n\r\n  const handleCategoryChange = (e) => {\r\n    setSelectedCategory(e.target.value);\r\n  };\r\n\r\n  const handleEventClick = (e, event_id) => {\r\n    if (e.target.classList.contains('booking-dropdown') || e.target.classList.contains('proceed-button') || e.target.classList.contains('like-button') || e.target.classList.contains('settings-dropdown')) {\r\n      return;\r\n    }\r\n\r\n    setFlippedEvents((prev) => ({\r\n      ...prev,\r\n      [event_id]: !prev[event_id],\r\n    }));\r\n  };\r\n\r\n  const handlePaymentMethodChange = async (event, paymentMethod) => {\r\n    setSelectedEvent(event);\r\n    if (paymentMethod === 'stripe') {\r\n      navigate(`/checkout`, {\r\n        state: { event, method: 'stripe' },\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n    } else if (paymentMethod === 'mpesa') {\r\n      // Make a request to simulate Mpesa payment with JWT token in the headers\r\n      try {\r\n        const response = await fetch('/simulate-mpesa-payment', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            event_id: event.event_id,\r\n            amount: event.event_price,\r\n          }),\r\n        });\r\n\r\n        if (response.ok) {\r\n          alert('Payment successful!');\r\n        } else {\r\n          alert('Payment failed. Please try again.');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error making M-Pesa payment:', error);\r\n        alert('An error occurred. Please try again.');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLikeClick = async (event_id) => {\r\n    const isLiked = likedEvents[event_id];\r\n\r\n    try {\r\n      const response = await fetch(`/events/${event_id}/like`, {\r\n        method: isLiked ? 'DELETE' : 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ user_id: location.state.user_id }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        setLikedEvents((prev) => ({\r\n          ...prev,\r\n          [event_id]: !isLiked,\r\n        }));\r\n      } else {\r\n        console.error(isLiked ? 'Failed to unlike the event' : 'Failed to like the event');\r\n      }\r\n    } catch (error) {\r\n      console.error(isLiked ? 'Error unliking event:' : 'Error liking event:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"landing-page\">\r\n      <header className=\"header\">\r\n        <nav className=\"nav-links\">\r\n          <ul>\r\n            <li><button onClick={() => navigate('/login')}>Logout</button></li>\r\n            <li>\r\n              <div className=\"settings-dropdown\">\r\n                <button>Profile</button>\r\n                <div className=\"dropdown-content\">\r\n                  <button onClick={() => navigate('/change-password')}>Change Password</button>\r\n                  <button onClick={() => navigate('/view-proof-of-payment')}>View Proof of Payment</button>\r\n                </div>\r\n              </div>\r\n            </li>\r\n            <li><button onClick={() => navigate('/notifications')}>Notifications</button></li>\r\n            <li><button onClick={() => navigate('/my-events')}>My Events</button></li>\r\n          </ul>\r\n        </nav>\r\n      </header>\r\n      <div className=\"content\">\r\n        <h1>Welcome, {username}!</h1>\r\n        <p>Select a Country to View Events:</p>\r\n        <div className=\"filters\">\r\n          <select onChange={handleCountryChange} value={selectedCountry}>\r\n            <option value=\"\">Select Country</option>\r\n            {countries.map((country, index) => (\r\n              <option key={index} value={country}>{country}</option>\r\n            ))}\r\n          </select>\r\n\r\n          {selectedCountry && (\r\n            <>\r\n              <select onChange={handleLocationChange} value={selectedLocation}>\r\n                <option value=\"\">Select Location</option>\r\n                {locations.map((location, index) => (\r\n                  <option key={index} value={location}>{location}</option>\r\n                ))}\r\n              </select>\r\n\r\n              <select onChange={handleCategoryChange} value={selectedCategory}>\r\n                <option value=\"\">Select Category</option>\r\n                {categories.map((category, index) => (\r\n                  <option key={index} value={category}>{category}</option>\r\n                ))}\r\n              </select>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {events.length > 0 ? (\r\n          <div className=\"events-container\">\r\n            {events.map((event) => (\r\n              <div\r\n                key={event.event_id}\r\n                className={`event-card ${flippedEvents[event.event_id] ? 'flipped' : ''}`}\r\n                onClick={(e) => handleEventClick(e, event.event_id)}\r\n              >\r\n                <div className=\"event-card-inner\">\r\n                  {/* Front of the card */}\r\n                  <div className=\"event-card-front\">\r\n                    <img\r\n                      src={`/event_images/${event.event_poster}`}\r\n                      alt={event.event_name}\r\n                      className=\"event-poster\"\r\n                    />\r\n                    <div className=\"event-details\">\r\n                      <h3>{event.event_name}</h3>\r\n                      <p><strong>Date:</strong> {new Date(event.event_date).toLocaleString()}</p>\r\n                      <p><strong>Location:</strong> {event.event_location}</p>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Back of the card */}\r\n                  <div className=\"event-card-back\">\r\n                    <h3>{event.event_name}</h3>\r\n                    <p><strong>Description:</strong> {event.event_description}</p>\r\n                    <p><strong>Price:</strong> ${event.event_price}</p>\r\n                    <p><strong>Capacity:</strong> {event.event_capacity} people</p>\r\n                    <p><strong>Tickets Remaining:</strong> {event.event_capacity} tickets</p>\r\n\r\n                    {/* Book Tickets Dropdown */}\r\n                    <select\r\n                      className=\"booking-dropdown\"\r\n                      onClick={(e) => e.stopPropagation()}\r\n                      onChange={(e) => handlePaymentMethodChange(event, e.target.value)}\r\n                      defaultValue=\"\"\r\n                    >\r\n                      <option value=\"\" disabled>Buy Tickets</option>\r\n                      <option value=\"stripe\">Card Payment</option>\r\n                      <option value=\"mpesa\">M-Pesa</option>\r\n                    </select>\r\n\r\n                    {/* Like/Unlike Button */}\r\n                    <button\r\n                      className=\"like-button\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleLikeClick(event.event_id);\r\n                      }}\r\n                    >\r\n                      {likedEvents[event.event_id] ? 'Unlike' : 'Like'}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          selectedCountry && <p>No approved events available for the selected filters.</p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Conditionally render the Stripe checkout if an event is selected */}\r\n      {selectedEvent && (\r\n        <Elements stripe={stripePromise}>\r\n          <CheckoutForm event={selectedEvent} />\r\n        </Elements>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LandingPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}