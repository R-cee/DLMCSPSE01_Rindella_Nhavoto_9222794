{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Pie}from'react-chartjs-2';import{Chart as ChartJS,ArcElement,Tooltip,Legend}from'chart.js';import'./HostReports.css';// Register the necessary components for the Pie chart\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(ArcElement,Tooltip,Legend);const HostReports=()=>{const[reports,setReports]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);// Fetch host reports\nuseEffect(()=>{const fetchReports=async()=>{try{const response=await fetch('/host/reports',{method:'GET',headers:{'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setReports(data);}else{const errorData=await response.json();setError(errorData.error);}}catch(error){setError('Failed to fetch reports. Please try again later.');}finally{setIsLoading(false);}};fetchReports();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"host-reports-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Host Reports\"}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading reports...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}):reports.map((report,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"report-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:report.event_name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(report.event_date).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",report.event_location]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",report.event_category]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Sales:\"}),\" $\",report.total_sales.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Ticket Sales\"}),/*#__PURE__*/_jsx(Pie,{data:{labels:['Tickets Sold','Tickets Unsold'],datasets:[{label:`${report.event_name} - Tickets Sold vs Unsold`,data:[report.tickets_sold,report.tickets_unsold],backgroundColor:['#4caf50','#f44336']}]},options:{responsive:true,maintainAspectRatio:false}})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Transactions\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"transactions-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Transaction ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount Paid\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Timestamp\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:report.transactions.length>0?report.transactions.map(transaction=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:transaction.transaction_id}),/*#__PURE__*/_jsx(\"td\",{children:transaction.user_id}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",transaction.amount_paid.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:transaction.payment_status}),/*#__PURE__*/_jsx(\"td\",{children:new Date(transaction.timestamp).toLocaleString()})]},transaction.transaction_id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",children:\"No transactions available.\"})})})]})]},index))]});};export default HostReports;","map":{"version":3,"names":["React","useState","useEffect","Pie","Chart","ChartJS","ArcElement","Tooltip","Legend","jsx","_jsx","jsxs","_jsxs","register","HostReports","reports","setReports","isLoading","setIsLoading","error","setError","fetchReports","response","fetch","method","headers","ok","data","json","errorData","className","children","map","report","index","event_name","Date","event_date","toLocaleString","event_location","event_category","total_sales","toFixed","labels","datasets","label","tickets_sold","tickets_unsold","backgroundColor","options","responsive","maintainAspectRatio","transactions","length","transaction","transaction_id","user_id","amount_paid","payment_status","timestamp","colSpan"],"sources":["C:/Users/Rindella Nhavoto/Desktop/ProjectsVSC/SWEproject/events-system-frontend/src/components/HostReports.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Pie } from 'react-chartjs-2';\r\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend } from 'chart.js';\r\nimport './HostReports.css';\r\n\r\n\r\n// Register the necessary components for the Pie chart\r\nChartJS.register(ArcElement, Tooltip, Legend);\r\n\r\nconst HostReports = () => {\r\n  const [reports, setReports] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Fetch host reports\r\n  useEffect(() => {\r\n    const fetchReports = async () => {\r\n      try {\r\n        const response = await fetch('/host/reports', {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setReports(data);\r\n        } else {\r\n          const errorData = await response.json();\r\n          setError(errorData.error);\r\n        }\r\n      } catch (error) {\r\n        setError('Failed to fetch reports. Please try again later.');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchReports();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"host-reports-page\">\r\n      <h1>Host Reports</h1>\r\n\r\n      {isLoading ? (\r\n        <p>Loading reports...</p>\r\n      ) : error ? (\r\n        <p className=\"error-message\">{error}</p>\r\n      ) : (\r\n        reports.map((report, index) => (\r\n          <div key={index} className=\"report-card\">\r\n            <h2>{report.event_name}</h2>\r\n            <p><strong>Date:</strong> {new Date(report.event_date).toLocaleString()}</p>\r\n            <p><strong>Location:</strong> {report.event_location}</p>\r\n            <p><strong>Category:</strong> {report.event_category}</p>\r\n            <p><strong>Total Sales:</strong> ${report.total_sales.toFixed(2)}</p>\r\n\r\n            {/* Tickets Sold vs Unsold Pie Chart */}\r\n            <div className=\"chart-container\">\r\n              <h3>Ticket Sales</h3>\r\n              <Pie\r\n                data={{\r\n                  labels: ['Tickets Sold', 'Tickets Unsold'],\r\n                  datasets: [\r\n                    {\r\n                      label: `${report.event_name} - Tickets Sold vs Unsold`,\r\n                      data: [report.tickets_sold, report.tickets_unsold],\r\n                      backgroundColor: ['#4caf50', '#f44336'],\r\n                    },\r\n                  ],\r\n                }}\r\n                options={{\r\n                  responsive: true,\r\n                  maintainAspectRatio: false,\r\n                }}\r\n              />\r\n\r\n            </div>\r\n\r\n            {/* Transactions Table */}\r\n            <h3>Transactions</h3>\r\n            <table className=\"transactions-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Transaction ID</th>\r\n                  <th>User ID</th>\r\n                  <th>Amount Paid</th>\r\n                  <th>Payment Status</th>\r\n                  <th>Timestamp</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {report.transactions.length > 0 ? (\r\n                  report.transactions.map((transaction) => (\r\n                    <tr key={transaction.transaction_id}>\r\n                      <td>{transaction.transaction_id}</td>\r\n                      <td>{transaction.user_id}</td>\r\n                      <td>${transaction.amount_paid.toFixed(2)}</td>\r\n                      <td>{transaction.payment_status}</td>\r\n                      <td>{new Date(transaction.timestamp).toLocaleString()}</td>\r\n                    </tr>\r\n                  ))\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan=\"5\">No transactions available.</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HostReports;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}