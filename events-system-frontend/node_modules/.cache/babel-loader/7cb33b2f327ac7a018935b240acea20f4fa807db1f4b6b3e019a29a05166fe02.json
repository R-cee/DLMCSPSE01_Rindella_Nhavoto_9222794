{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./AdminLogs.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminLogs=()=>{const[logs,setLogs]=useState([]);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[actionFilter,setActionFilter]=useState('');const[usernameSearch,setUsernameSearch]=useState('');const fetchLogs=async()=>{try{const response=await fetch(`/admin/view-logs?page=${page}&action=${actionFilter}&username=${usernameSearch}`);if(response.ok){const data=await response.json();setLogs(data.interactions);setTotalPages(data.total_pages);}else{console.error('Failed to fetch logs');}}catch(error){console.error('Error fetching logs:',error);}};useEffect(()=>{fetchLogs();},[page,actionFilter,usernameSearch]);const handlePageChange=newPage=>{if(newPage>0&&newPage<=totalPages){setPage(newPage);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-logs-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Interactions Logs\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setActionFilter(e.target.value),value:actionFilter,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Actions\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Login\",children:\"Login\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Event_created\",children:\"Event Created\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Paid\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Liked\",children:\"Liked\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Vetting_form\",children:\"Vetting Form Submitted\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by Username\",value:usernameSearch,onChange:e=>setUsernameSearch(e.target.value)})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"logs-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Creation Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Event ID\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:logs.map(log=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:log.username}),/*#__PURE__*/_jsx(\"td\",{children:log.action}),/*#__PURE__*/_jsx(\"td\",{children:log.timestamp}),/*#__PURE__*/_jsx(\"td\",{children:log.event_id?log.event_id:'N/A'})]},log.interaction_id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page-1),disabled:page===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",page,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page+1),disabled:page===totalPages,children:\"Next\"})]})]});};export default AdminLogs;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AdminLogs","logs","setLogs","page","setPage","totalPages","setTotalPages","actionFilter","setActionFilter","usernameSearch","setUsernameSearch","fetchLogs","response","fetch","ok","data","json","interactions","total_pages","console","error","handlePageChange","newPage","className","children","onChange","e","target","value","type","placeholder","map","log","username","action","timestamp","event_id","interaction_id","onClick","disabled"],"sources":["C:/Users/Rindella Nhavoto/Desktop/ProjectsVSC/SWEproject/events-system-frontend/src/components/AdminLogs.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './AdminLogs.css';\r\n\r\nconst AdminLogs = () => {\r\n  const [logs, setLogs] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [actionFilter, setActionFilter] = useState('');\r\n  const [usernameSearch, setUsernameSearch] = useState('');\r\n\r\n  const fetchLogs = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        `/admin/view-logs?page=${page}&action=${actionFilter}&username=${usernameSearch}`\r\n      );\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setLogs(data.interactions);\r\n        setTotalPages(data.total_pages);\r\n      } else {\r\n        console.error('Failed to fetch logs');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching logs:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchLogs();\r\n  }, [page, actionFilter, usernameSearch]);\r\n\r\n  const handlePageChange = (newPage) => {\r\n    if (newPage > 0 && newPage <= totalPages) {\r\n      setPage(newPage);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-logs-container\">\r\n      <h2>User Interactions Logs</h2>\r\n      <div className=\"filters\">\r\n        <select onChange={(e) => setActionFilter(e.target.value)} value={actionFilter}>\r\n          <option value=\"\">All Actions</option>\r\n          <option value=\"Login\">Login</option>\r\n          <option value=\"Event_created\">Event Created</option>\r\n          <option value=\"Paid\">Paid</option>\r\n          <option value=\"Liked\">Liked</option>\r\n          <option value=\"Vetting_form\">Vetting Form Submitted</option>\r\n        </select>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by Username\"\r\n          value={usernameSearch}\r\n          onChange={(e) => setUsernameSearch(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      <table className=\"logs-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Username</th>\r\n            <th>Action</th>\r\n            <th>Creation Date</th>\r\n            <th>Event ID</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {logs.map((log) => (\r\n            <tr key={log.interaction_id}>\r\n              <td>{log.username}</td>\r\n              <td>{log.action}</td>\r\n              <td>{log.timestamp}</td>\r\n              <td>{log.event_id ? log.event_id : 'N/A'}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"pagination\">\r\n        <button onClick={() => handlePageChange(page - 1)} disabled={page === 1}>\r\n          Previous\r\n        </button>\r\n        <span>\r\n          Page {page} of {totalPages}\r\n        </span>\r\n        <button onClick={() => handlePageChange(page + 1)} disabled={page === totalPages}>\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminLogs;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}