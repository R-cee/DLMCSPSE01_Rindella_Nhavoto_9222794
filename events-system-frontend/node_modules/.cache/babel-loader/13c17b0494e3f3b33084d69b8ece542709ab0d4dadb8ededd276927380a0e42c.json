{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./ManageUserPage.css';import AdminHeader from'./AdminHeader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageUserPage=()=>{const[users,setUsers]=useState([]);useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const token=localStorage.getItem('jwt_token');const response=await fetch('/api/admin/users',{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setUsers(data);}else{console.error('Failed to fetch users');}}catch(error){console.error('Error fetching users:',error);}};const toggleUserStatus=async user_id=>{try{const token=localStorage.getItem('jwt_token');const response=await fetch(`/api/admin/user-status/${user_id}`,{method:'POST',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(data.success){fetchUsers();}else{alert('Error updating user status');}}catch(error){console.error('Error updating user status:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"manage-user-page\",children:[/*#__PURE__*/_jsx(AdminHeader,{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Users\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{children:user.status}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:`status-button ${user.status==='active'?'active':'blocked'}`,onClick:()=>toggleUserStatus(user.user_id),children:user.status==='active'?'Block':'Unblock'})})]},user.user_id))})]})]});};export default ManageUserPage;","map":{"version":3,"names":["React","useState","useEffect","AdminHeader","jsx","_jsx","jsxs","_jsxs","ManageUserPage","users","setUsers","fetchUsers","token","localStorage","getItem","response","fetch","headers","ok","data","json","console","error","toggleUserStatus","user_id","method","success","alert","className","children","map","user","username","email","role","status","onClick"],"sources":["C:/Users/Rindella Nhavoto/Desktop/ProjectsVSC/SWEproject/events-system-frontend/src/components/ManageUserPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './ManageUserPage.css';\r\nimport AdminHeader from './AdminHeader';    \r\n\r\nconst ManageUserPage = () => {\r\n    const [users, setUsers] = useState([]);\r\n\r\n    useEffect(() => {\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            const token = localStorage.getItem('jwt_token'); \r\n            const response = await fetch('/api/admin/users', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n            });\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setUsers(data);\r\n            } else {\r\n                console.error('Failed to fetch users');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching users:', error);\r\n        }\r\n    };\r\n\r\n    const toggleUserStatus = async (user_id) => {\r\n        try {\r\n            const token = localStorage.getItem('jwt_token');\r\n            const response = await fetch(`/api/admin/user-status/${user_id}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n            });\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                fetchUsers(); \r\n            } else {\r\n                alert('Error updating user status');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error updating user status:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"manage-user-page\">\r\n            <AdminHeader />\r\n            <h2>Manage Users</h2>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Username</th>\r\n                        <th>Email</th>\r\n                        <th>Role</th>\r\n                        <th>Status</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {users.map((user) => (\r\n                        <tr key={user.user_id}>\r\n                            <td>{user.username}</td>\r\n                            <td>{user.email}</td>\r\n                            <td>{user.role}</td>\r\n                            <td>{user.status}</td>\r\n                            <td>\r\n                                <button\r\n                                    className={`status-button ${user.status === 'active' ? 'active' : 'blocked'}`}\r\n                                    onClick={() => toggleUserStatus(user.user_id)}\r\n                                >\r\n                                    {user.status === 'active' ? 'Block' : 'Unblock'}\r\n                                </button>\r\n                            </td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ManageUserPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,sBAAsB,CAC7B,MAAO,CAAAC,WAAW,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CACzB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACZS,UAAU,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACA,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAC/C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,kBAAkB,CAAE,CAC7CC,OAAO,CAAE,CACL,eAAe,CAAE,UAAUL,KAAK,EACpC,CACJ,CAAC,CAAC,CACF,GAAIG,QAAQ,CAACG,EAAE,CAAE,CACb,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClCV,QAAQ,CAACS,IAAI,CAAC,CAClB,CAAC,IAAM,CACHE,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAC,CAC1C,CACJ,CAAE,MAAOA,KAAK,CAAE,CACZD,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CACjD,CACJ,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAG,KAAO,CAAAC,OAAO,EAAK,CACxC,GAAI,CACA,KAAM,CAAAZ,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAC/C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,0BAA0BQ,OAAO,EAAE,CAAE,CAC9DC,MAAM,CAAE,MAAM,CACdR,OAAO,CAAE,CACL,eAAe,CAAE,UAAUL,KAAK,EACpC,CACJ,CAAC,CAAC,CACF,KAAM,CAAAO,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CAClC,GAAID,IAAI,CAACO,OAAO,CAAE,CACdf,UAAU,CAAC,CAAC,CAChB,CAAC,IAAM,CACHgB,KAAK,CAAC,4BAA4B,CAAC,CACvC,CACJ,CAAE,MAAOL,KAAK,CAAE,CACZD,OAAO,CAACC,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACvD,CACJ,CAAC,CAED,mBACIf,KAAA,QAAKqB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7BxB,IAAA,CAACF,WAAW,GAAE,CAAC,cACfE,IAAA,OAAAwB,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBtB,KAAA,UAAAsB,QAAA,eACIxB,IAAA,UAAAwB,QAAA,cACItB,KAAA,OAAAsB,QAAA,eACIxB,IAAA,OAAAwB,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBxB,IAAA,OAAAwB,QAAA,CAAI,OAAK,CAAI,CAAC,cACdxB,IAAA,OAAAwB,QAAA,CAAI,MAAI,CAAI,CAAC,cACbxB,IAAA,OAAAwB,QAAA,CAAI,QAAM,CAAI,CAAC,cACfxB,IAAA,OAAAwB,QAAA,CAAI,QAAM,CAAI,CAAC,EACf,CAAC,CACF,CAAC,cACRxB,IAAA,UAAAwB,QAAA,CACKpB,KAAK,CAACqB,GAAG,CAAEC,IAAI,eACZxB,KAAA,OAAAsB,QAAA,eACIxB,IAAA,OAAAwB,QAAA,CAAKE,IAAI,CAACC,QAAQ,CAAK,CAAC,cACxB3B,IAAA,OAAAwB,QAAA,CAAKE,IAAI,CAACE,KAAK,CAAK,CAAC,cACrB5B,IAAA,OAAAwB,QAAA,CAAKE,IAAI,CAACG,IAAI,CAAK,CAAC,cACpB7B,IAAA,OAAAwB,QAAA,CAAKE,IAAI,CAACI,MAAM,CAAK,CAAC,cACtB9B,IAAA,OAAAwB,QAAA,cACIxB,IAAA,WACIuB,SAAS,CAAE,iBAAiBG,IAAI,CAACI,MAAM,GAAK,QAAQ,CAAG,QAAQ,CAAG,SAAS,EAAG,CAC9EC,OAAO,CAAEA,CAAA,GAAMb,gBAAgB,CAACQ,IAAI,CAACP,OAAO,CAAE,CAAAK,QAAA,CAE7CE,IAAI,CAACI,MAAM,GAAK,QAAQ,CAAG,OAAO,CAAG,SAAS,CAC3C,CAAC,CACT,CAAC,GAZAJ,IAAI,CAACP,OAaV,CACP,CAAC,CACC,CAAC,EACL,CAAC,EACP,CAAC,CAEd,CAAC,CAED,cAAe,CAAAhB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}