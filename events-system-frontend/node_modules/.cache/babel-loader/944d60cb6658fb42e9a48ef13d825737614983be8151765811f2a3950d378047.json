{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./MyEvents.css';import AttendeeHeader from'./AttendeeHeader';import HostHeader from'./HostHeader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyEvents=()=>{const[purchasedEvents,setPurchasedEvents]=useState([]);const[likedEvents,setLikedEvents]=useState([]);const[userRole,setUserRole]=useState('');useEffect(()=>{const role=localStorage.getItem('role');setUserRole(role);},[]);const fetchMyEvents=async()=>{try{const token=localStorage.getItem('jwt_token');const response=await fetch('/api/my-events',{method:'GET',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setPurchasedEvents(data.purchased_events);setLikedEvents(data.liked_events);}else{console.error('Failed to fetch user events');}}catch(error){console.error('Error fetching user events:',error);}};useEffect(()=>{fetchMyEvents();},[]);const likeEvent=async eventId=>{try{const token=localStorage.getItem('jwt_token');const response=await fetch(`/events/${eventId}/like`,{method:'POST',headers:{'Authorization':`Bearer ${token}`}});if(response.ok){console.log('Event liked successfully');fetchMyEvents();}else{console.error('Failed to like event');}}catch(error){console.error('Error liking event:',error);}};const unlikeEvent=async eventId=>{try{const token=localStorage.getItem('jwt_token');const response=await fetch(`/events/${eventId}/like`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});if(response.ok){console.log('Event unliked successfully');fetchMyEvents();}else{console.error('Failed to unlike event');}}catch(error){console.error('Error unliking event:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"my-events-page\",children:[userRole==='Attendee'&&/*#__PURE__*/_jsx(AttendeeHeader,{}),userRole==='EventHost'&&/*#__PURE__*/_jsx(HostHeader,{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Purchased Events\"}),purchasedEvents.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"events-container\",children:purchasedEvents.map(event=>/*#__PURE__*/_jsxs(\"div\",{className:\"event-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:`/event_images/${event.event_poster}`,alt:event.event_name,className:\"event-poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:event.event_name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(event.event_date).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",event.event_location]})]})]},event.event_id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No purchased events available.\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Liked Events\"}),likedEvents.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"events-container\",children:likedEvents.map(event=>/*#__PURE__*/_jsxs(\"div\",{className:\"event-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:`/event_images/${event.event_poster}`,alt:event.event_name,className:\"event-poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:event.event_name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(event.event_date).toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",event.event_location]}),/*#__PURE__*/_jsxs(\"div\",{className:\"like-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>likeEvent(event.event_id),children:\"Like\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>unlikeEvent(event.event_id),children:\"Unlike\"})]})]})]},event.event_id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No liked events available.\"})]});};export default MyEvents;","map":{"version":3,"names":["React","useState","useEffect","AttendeeHeader","HostHeader","jsx","_jsx","jsxs","_jsxs","MyEvents","purchasedEvents","setPurchasedEvents","likedEvents","setLikedEvents","userRole","setUserRole","role","localStorage","getItem","fetchMyEvents","token","response","fetch","method","headers","ok","data","json","purchased_events","liked_events","console","error","likeEvent","eventId","log","unlikeEvent","className","children","length","map","event","src","event_poster","alt","event_name","Date","event_date","toLocaleString","event_location","event_id","onClick"],"sources":["C:/Users/Rindella Nhavoto/Desktop/ProjectsVSC/SWEproject/EventsGit/DLMCSPSE01_Rindella_Nhavoto_9222794/events-system-frontend/src/components/MyEvents.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './MyEvents.css';\r\nimport AttendeeHeader from './AttendeeHeader';\r\nimport HostHeader from './HostHeader';\r\n\r\nconst MyEvents = () => {\r\n  const [purchasedEvents, setPurchasedEvents] = useState([]);\r\n  const [likedEvents, setLikedEvents] = useState([]);\r\n  const [userRole, setUserRole] = useState('');\r\n\r\n  useEffect(() => {\r\n    const role = localStorage.getItem('role');\r\n    setUserRole(role);\r\n  }, []);\r\n\r\n  const fetchMyEvents = async () => {\r\n    try {\r\n      const token = localStorage.getItem('jwt_token');\r\n      const response = await fetch('/api/my-events', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setPurchasedEvents(data.purchased_events);\r\n        setLikedEvents(data.liked_events);\r\n      } else {\r\n        console.error('Failed to fetch user events');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching user events:', error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchMyEvents();\r\n  }, []);\r\n\r\n  const likeEvent = async (eventId) => {\r\n    try {\r\n      const token = localStorage.getItem('jwt_token');\r\n      const response = await fetch(`/events/${eventId}/like`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      });\r\n      if (response.ok) {\r\n        console.log('Event liked successfully');\r\n        fetchMyEvents();\r\n      } else {\r\n        console.error('Failed to like event');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error liking event:', error);\r\n    }\r\n  };\r\n\r\n  const unlikeEvent = async (eventId) => {\r\n    try {\r\n      const token = localStorage.getItem('jwt_token');\r\n      const response = await fetch(`/events/${eventId}/like`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      });\r\n      if (response.ok) {\r\n        console.log('Event unliked successfully');\r\n        fetchMyEvents(); \r\n      } else {\r\n        console.error('Failed to unlike event');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error unliking event:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"my-events-page\">\r\n      {userRole === 'Attendee' && <AttendeeHeader />}\r\n      {userRole === 'EventHost' && <HostHeader />}\r\n\r\n      <h2>Purchased Events</h2>\r\n      {purchasedEvents.length > 0 ? (\r\n        <div className=\"events-container\">\r\n          {purchasedEvents.map((event) => (\r\n            <div key={event.event_id} className=\"event-card\">\r\n              <img src={`/event_images/${event.event_poster}`} alt={event.event_name} className=\"event-poster\" />\r\n              <div className=\"event-details\">\r\n                <h3>{event.event_name}</h3>\r\n                <p><strong>Date:</strong> {new Date(event.event_date).toLocaleString()}</p>\r\n                <p><strong>Location:</strong> {event.event_location}</p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <p>No purchased events available.</p>\r\n      )}\r\n\r\n      <h2>Liked Events</h2>\r\n      {likedEvents.length > 0 ? (\r\n        <div className=\"events-container\">\r\n          {likedEvents.map((event) => (\r\n            <div key={event.event_id} className=\"event-card\">\r\n              <img src={`/event_images/${event.event_poster}`} alt={event.event_name} className=\"event-poster\" />\r\n              <div className=\"event-details\">\r\n                <h3>{event.event_name}</h3>\r\n                <p><strong>Date:</strong> {new Date(event.event_date).toLocaleString()}</p>\r\n                <p><strong>Location:</strong> {event.event_location}</p>\r\n                <div className=\"like-buttons\">\r\n                  <button onClick={() => likeEvent(event.event_id)}>Like</button>\r\n                  <button onClick={() => unlikeEvent(event.event_id)}>Unlike</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <p>No liked events available.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyEvents;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}